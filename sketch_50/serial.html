<!DOCTYPE html>
<html>
<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/p5.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/addons/p5.dom.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.11/addons/p5.sound.js"></script>
  <script language="javascript" type="text/javascript" src="p5.serialport.js"></script>
  <script src="model_pca_20_svm.js"></script>
  <script src="clmtrackr.js"></script>  
</head>
<body>
  <script>
//   var serial;
//   var portName = '/dev/ttyACM0';
//   var inData;
//   function setup(){
//     serial = new p5.SerialPort();       // make a new instance of the serialport library
//     serial.on('list', printList);  // set a callback function for the serialport list event
//     serial.on('connected', serverConnected); // callback for connecting to the server
//     serial.on('open', portOpen);        // callback for the port opening
//     serial.on('data', serialEvent);     // callback for when new data arrives
//     serial.on('error', serialError);    // callback for errors
//     serial.on('close', portClose);      // callback for the port closing
  
//     serial.list();                      // list the serial ports
//     serial.open(portName);      
//     inData = Number(serial.read());
//     createCanvas(400,400);
//   }

//   function draw(){
//     background(33);
//     fill(255);
//     text("sensor val: " + inData,30,30);
//   }
//   function printList(portList){
//     for(i = 0; i<portList.length;i++){
//       console.log(i+" " + portList[i]);
//     }
//   }
//   function serverConnected() {
//     console.log('connected to server.');
// }
 
// function portOpen() {
//   console.log('the serial port opened.')
// }
 
// function serialEvent() {
 
// }
 
// function serialError(err) {
//   console.log('Something went wrong with the serial port. ' + err);
// }
 
// function portClose() {
//   console.log('The serial port closed.');
// }

var serial;          // variable to hold an instance of the serialport library
var portName = '/dev/ttyACM0';  // fill in your serial port name here
var inData;                             // for incoming serial data

function serialEvent() {
  inData = Number(serial.read());
}

function setup() {
  createCanvas(400, 300);
}
function draw() {
  background(0);
  fill(255);
  text("sensor value: " + inData, 30, 30);
}

  </script>
</body>
</html>
